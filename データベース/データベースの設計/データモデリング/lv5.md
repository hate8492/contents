# データモデリング Lv5

----

**教材制作者へ**

このレベルには，IPA情報処理技術者試験の過去問を用いている。

該当の問題には出典を明記し，出典元と表現が大きく異ならないよう作成すること。

- [過去問題](https://www.jitec.ipa.go.jp/1_04hanni_sukiru/_index_mondai.html)

IPA情報処理技術者試験では，特に指示の無い場合は，ア〜エ（もしくはそれに順ずる英数記号）の単数選択問題とする。

 
 - 注意
 	- アンダーライン等がgithubで消えて見える場合があるので，その場合は過去問やソースコード中の `<u>...</u>` を直接確認してください。

----

## Q1

（出典：応用情報技術者試験 平成28年春期分 午前 問27 をもとに作成）

関数従属を次のように表記するとき，属性a〜eで構成される関係を第3正規形にしたものはどれか。

![出典：応用情報技術者試験 平成28年春期分 午前 問27](./img/ipa_h28s_ap_am_q27.png)

### ヒント1

第3正規形とは，第2正規形の表に対し，主キー・複合キー以外の属性によって，推移的関数従属となる部分を完全関数従属となるように表に分けたものである。

### ヒント2

正規化する関係では，属性aが主キーとなっている。そこで，属性aに関わる関数従属以外（つまり，推移的関数従属のもの）を，別の表に分離する。

### ヒント3

属性a以外に，設問の関数従属(1)，(2)の関係にあるものは，b→c，{b，d}→eの二つである。

ここで，属性cは，a→cの関係も考えられるが，関数従属(1)の説明から，属性aがなくとも属性bだけで，属性cを一意に定めることができるため，a→cの関係は分離してもかまわない。

この条件に当てはまるものは，エである。（a→b，a→d，b→c，{b，d}→eの関数従属が全て成り立っている）

答え　エ

## Q2 ドロップダウン

（出典：応用情報技術者試験 平成28年春期分 午前 問29 をもとに作成）

次の表において，"在庫"表の製品番号に定義された参照制約によって拒否される可能性がある操作はどれか。ここで，実線の下線は主キーを，破線の下線は外部キーを表す。

![出典：応用情報技術者試験 平成28年春期分 午前 問27](./img/ipa_h28s_ap_am_q29.png)

- "在庫"表の行削除
- "在庫"表の表削除
- "在庫"表への行追加
- "製品"表への行追加

### ヒント1

参照制約（外部キー）を表に設定するためには，参照元のキーの変更操作にあわせて，外部キーをどのように保つか定義する必要がある。

設問では，"在庫"表の製品番号が外部キーであり，この製品番号は"製品"表の製造番号の主キーを参照している。

### ヒント2

つまり，"製品"表の製造番号の更新・削除や，"製品"表の製造番号を用いた"参照"表の追加の操作に参照制約の影響がある。

"在庫"表の行削除と，"在庫"表の表削除は，"在庫"表の削除に関わるものである。よって，参照制約によって拒否されることはない。

### ヒント3

"製品"表への行追加も，"製品"表の製造番号の更新・削除に関わるものではない。よって，参照制約によって拒否されることはない。

"在庫"表への行追加では，"製品"の製品番号に値がないものを"在庫"表に追加しようとすると，参照制約によって拒否される可能性がある。

答え　"在庫"表への行追加

## Q3　ドロップダウン

関係R(A，B，C，D，E，F)において，関数従属A→B，C→D，C→E，{A,C}→Fが成立するとき，関係Rの候補キーはどれか。

- A
- C
- {A，C}
- {A，C，E}

### ヒント1

関数従属は，ある属性（もしくは属性の組）の値によって他の属性の値を一意に定めることができるものをいう。

候補キーとは，属性の関係のタプルを一意に識別できる属性（もしくは属性の組みあわせで極小のもの）をいう。

### ヒント2

候補キーとして，AからFの属性の関係を一意に識別できる属性（もしくは属性の組）は，関数従属で起点となる属性の組み合わせである。

設問の場合，属性Aの値でBの値が，Cの値でDとEの値が，AとCの値でFの値が一意に定められる。

### ヒント3

したがって，A，Cの二つの属性の組で，B，D，E，Fをそれぞれ一意に定めることができる。

答え　{A，C}

---

Lv6 応用情報技術者試験 平成25年度秋期分 問45 多重度

Lv6 応用情報技術者試験 平成25年度春期分 問28 データモデル

Lv5 応用情報技術者試験 平成27年度秋期分 問28 候補キー

Lv5 応用情報技術者試験 平成26年度秋期分 問26 データモデル

Lv5 応用情報技術者試験 平成24年度秋期分 問26 関係従属

Lv5 応用情報技術者試験 平成24年度秋期分 問27 ER

Lv5 情報処理技術者試験 平成28年度春期分 問27 正規化

Lv5 応用情報技術者試験 平成21年度秋期分 問30 データモデル 
